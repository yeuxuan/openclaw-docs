---
title: "æ¥å…¥ Telegramï¼ˆæ¨èæ–°æ‰‹ï¼‰"
sidebarTitle: "æ¥å…¥ Telegram"
---

# æ¥å…¥ Telegramâ€”â€”æœ€ç®€å•çš„æ¥å…¥æ–¹å¼

Telegram æ˜¯æ–°æ‰‹æœ€æ¨èçš„æ¥å…¥æ–¹å¼ï¼Œå› ä¸ºè®¾ç½®æœ€ç®€å•ï¼š**åªéœ€è¦åˆ›å»ºä¸€ä¸ª Botï¼Œè·å–ä¸€ä¸ª Tokenï¼Œå¡«å…¥ OpenClawï¼Œå°±å®Œæˆäº†ï¼**

---

## æ–°æ‰‹å¿«é€Ÿæ¥å…¥ï¼ˆ5 åˆ†é’Ÿæå®šï¼‰

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Telegram Botï¼Œè·å– Token

1. æ‰“å¼€ Telegramï¼ˆæ‰‹æœºæˆ–ç”µè„‘ç‰ˆéƒ½å¯ä»¥ï¼‰
2. æœç´¢ `@BotFather`ï¼ˆæ³¨æ„ï¼šå¿…é¡»æ˜¯è¿™ä¸ªåå­—ï¼Œæœ‰è“è‰²è®¤è¯æ ‡è¯†ï¼‰
3. ç‚¹å‡»"å¼€å§‹"æˆ–å‘é€ `/start`
4. å‘é€å‘½ä»¤ `/newbot`
5. BotFather ä¼šé—®ä½ èµ·åå­—ï¼š
   - **Full nameï¼ˆå®Œæ•´åç§°ï¼‰**ï¼šéšä¾¿èµ·ï¼Œæ¯”å¦‚ `My AI Assistant`
   - **Usernameï¼ˆç”¨æˆ·åï¼‰**ï¼šå¿…é¡»ä»¥ `bot` ç»“å°¾ï¼Œæ¯”å¦‚ `my_ai_bot`
6. æˆåŠŸåï¼ŒBotFather ä¼šå‘ç»™ä½ ä¸€æ®µ **Token**ï¼ˆçœ‹èµ·æ¥åƒ `7123456789:AAEBcd...`ï¼‰

**ç«‹åˆ»å¤åˆ¶è¿™ä¸ª Tokenï¼** è¿™æ˜¯ä½ çš„ Bot çš„"å¯†ç "ï¼Œå¦¥å–„ä¿ç®¡ã€‚

### ç¬¬äºŒæ­¥ï¼šæŠŠ Token å¡«å…¥ OpenClaw

åœ¨ç»ˆç«¯è¿è¡Œï¼š

```bash
openclaw channels login --channel telegram
```

æŒ‰æç¤ºè¾“å…¥ä½ çš„ Bot Tokenï¼Œå›è½¦ã€‚

### ç¬¬ä¸‰æ­¥ï¼šé‡å¯ç½‘å…³

```bash
openclaw gateway restart
```

### ç¬¬å››æ­¥ï¼šå’Œä½ çš„ Bot è¯´è¯ï¼

åœ¨ Telegram æœç´¢ä½ åˆšåˆ›å»ºçš„ Bot ç”¨æˆ·åï¼ˆæ¯”å¦‚ `my_ai_bot`ï¼‰ï¼Œç‚¹å‡»"å¼€å§‹"ï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ã€‚

ç¬¬ä¸€æ¬¡å‘æ¶ˆæ¯æ—¶ï¼Œä½ ä¼šæ”¶åˆ°ä¸€ä¸ª**é…å¯¹ç **ã€‚è¿™æ˜¯å®‰å…¨éªŒè¯ï¼Œéœ€è¦ä½ åœ¨ç»ˆç«¯æ‰¹å‡†ï¼š

```bash
openclaw pairing list telegram        # æŸ¥çœ‹ç­‰å¾…æ‰¹å‡†çš„è¯·æ±‚
openclaw pairing approve telegram <CODE>   # æ‰¹å‡†ï¼ˆæŠŠ CODE æ›¿æ¢æˆå®é™…çš„ç ï¼‰
```

æ‰¹å‡†åï¼Œå†å‘ä¸€æ¡æ¶ˆæ¯ï¼ŒAI åŠ©æ‰‹å°±ä¼šå›å¤äº†ï¼

---

## å¸¸è§é—®é¢˜

::: details Bot Token æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

Token å°±æ˜¯ Telegram æœåŠ¡å™¨è¯†åˆ«ä½ çš„ Bot çš„å‡­è¯ï¼Œç±»ä¼¼äºè´¦å·+å¯†ç çš„ç»„åˆã€‚æœ‰äº† Tokenï¼ŒOpenClaw æ‰èƒ½ä»£è¡¨ä½ çš„ Bot å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚

:::

::: details Bot ä¸å›å¤æ¶ˆæ¯ï¼Œæ€ä¹ˆåŠï¼Ÿ

æŒ‰é¡ºåºæ£€æŸ¥ï¼š

1. ç¡®è®¤ç½‘å…³åœ¨è¿è¡Œï¼š`openclaw gateway status`
2. ç¡®è®¤ Telegram è¿æ¥æ­£å¸¸ï¼š`openclaw channels status`
3. ç¡®è®¤ä½ å·²ç»æ‰¹å‡†äº†é…å¯¹è¯·æ±‚ï¼š`openclaw pairing list telegram`

è¿˜æ˜¯ä¸è¡Œï¼ŸæŸ¥çœ‹å®æ—¶æ—¥å¿—æ‰¾çº¿ç´¢ï¼š`openclaw logs --follow`

:::

::: details èƒ½åœ¨ Telegram ç¾¤ç»„é‡Œä½¿ç”¨ Bot å—ï¼Ÿ

å¯ä»¥ï¼æŠŠ Bot æ·»åŠ è¿›ä½ çš„ç¾¤ç»„ï¼Œç„¶å @æåŠ Bot æ¥è§¦å‘å®ƒï¼ˆé»˜è®¤éœ€è¦ @ æ‰å“åº”ï¼‰ã€‚

å¦‚æœæƒ³è®© Bot ä¸éœ€è¦ @ ä¹Ÿèƒ½å“åº”æ‰€æœ‰æ¶ˆæ¯ï¼Œéœ€è¦ä¿®æ”¹é…ç½®ï¼š
1. å…ˆåœ¨ BotFather é‡Œå…³é—­"éšç§æ¨¡å¼"ï¼ˆå‘é€ `/setprivacy` ç»™ BotFatherï¼‰
2. ç„¶ååœ¨ OpenClaw é…ç½®é‡Œè®¾ç½® `requireMention: false`

:::

---

*ä»¥ä¸‹æ˜¯æŠ€æœ¯æ–‡æ¡£ï¼Œæ–°æ‰‹å¯ä»¥åœ¨éœ€è¦æ—¶å‚è€ƒã€‚*

---

## æŠ€æœ¯è¯´æ˜

çŠ¶æ€ï¼šé€šè¿‡ grammY å®ç°çš„æœºå™¨äººç§ä¿¡ + ç¾¤ç»„åŠŸèƒ½ï¼Œå·²å¯æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ã€‚é•¿è½®è¯¢æ˜¯é»˜è®¤æ¨¡å¼ï¼›Webhook æ¨¡å¼å¯é€‰ã€‚


  - [é…å¯¹](/channels/pairing) â€” Telegram é»˜è®¤ç§ä¿¡ç­–ç•¥ä¸ºé…å¯¹æ¨¡å¼ã€‚

  - [é€šé“æ•…éšœæ’æŸ¥](/channels/troubleshooting) â€” è·¨é€šé“è¯Šæ–­å’Œä¿®å¤æ‰‹å†Œã€‚

  - [ç½‘å…³é…ç½®](/gateway/configuration) â€” å®Œæ•´çš„é€šé“é…ç½®æ¨¡å¼å’Œç¤ºä¾‹ã€‚


## å¿«é€Ÿè®¾ç½®ï¼ˆæŠ€æœ¯ç‰ˆï¼‰


  ### æ­¥éª¤ 1ï¼šåœ¨ BotFather ä¸­åˆ›å»ºæœºå™¨äºº Token

    æ‰“å¼€ Telegram å¹¶ä¸ **@BotFather** èŠå¤©ï¼ˆç¡®è®¤ handle æ­£å¥½æ˜¯ `@BotFather`ï¼‰ã€‚

    è¿è¡Œ `/newbot`ï¼ŒæŒ‰æç¤ºæ“ä½œï¼Œä¿å­˜ Tokenã€‚


  ### æ­¥éª¤ 2ï¼šé…ç½® Token å’Œç§ä¿¡ç­–ç•¥


```json5
{
  channels: {
    telegram: {
      enabled: true,
      botToken: "123:abc",
      dmPolicy: "pairing",
      groups: { "*": { requireMention: true } },
    },
  },
}
```

    ç¯å¢ƒå˜é‡å›é€€ï¼š`TELEGRAM_BOT_TOKEN=...`ï¼ˆä»…é»˜è®¤è´¦æˆ·ï¼‰ã€‚


  ### æ­¥éª¤ 3ï¼šå¯åŠ¨ç½‘å…³å¹¶æ‰¹å‡†é¦–æ¬¡ç§ä¿¡


```bash
openclaw gateway
openclaw pairing list telegram
openclaw pairing approve telegram <CODE>
```

    é…å¯¹ç åœ¨ 1 å°æ—¶åè¿‡æœŸã€‚


  ### æ­¥éª¤ 4ï¼šå°†æœºå™¨äººæ·»åŠ åˆ°ç¾¤ç»„

    å°†æœºå™¨äººæ·»åŠ åˆ°ä½ çš„ç¾¤ç»„ï¼Œç„¶åè®¾ç½® `channels.telegram.groups` å’Œ `groupPolicy` ä»¥åŒ¹é…ä½ çš„è®¿é—®æ¨¡å‹ã€‚


::: info è¯´æ˜
Token è§£æé¡ºåºä¸è´¦æˆ·ç›¸å…³ã€‚å®é™…ä¸Šï¼Œé…ç½®å€¼ä¼˜å…ˆäºç¯å¢ƒå˜é‡å›é€€ï¼Œ`TELEGRAM_BOT_TOKEN` ä»…é€‚ç”¨äºé»˜è®¤è´¦æˆ·ã€‚
:::


## Telegram ç«¯è®¾ç½®


::: details éšç§æ¨¡å¼å’Œç¾¤ç»„å¯è§æ€§

    Telegram æœºå™¨äººé»˜è®¤ä½¿ç”¨ **éšç§æ¨¡å¼**ï¼Œè¿™é™åˆ¶äº†å®ƒä»¬èƒ½æ¥æ”¶å“ªäº›ç¾¤ç»„æ¶ˆæ¯ã€‚

    å¦‚æœæœºå™¨äººéœ€è¦çœ‹åˆ°æ‰€æœ‰ç¾¤ç»„æ¶ˆæ¯ï¼Œå¯ä»¥ï¼š

    - é€šè¿‡ `/setprivacy` ç¦ç”¨éšç§æ¨¡å¼ï¼Œæˆ–
    - å°†æœºå™¨äººè®¾ä¸ºç¾¤ç»„ç®¡ç†å‘˜ã€‚

    åˆ‡æ¢éšç§æ¨¡å¼æ—¶ï¼Œåœ¨æ¯ä¸ªç¾¤ç»„ä¸­ç§»é™¤å¹¶é‡æ–°æ·»åŠ æœºå™¨äººï¼Œä»¥ä¾¿ Telegram åº”ç”¨æ›´æ”¹ã€‚

  

:::


::: details ç¾¤ç»„æƒé™

    ç®¡ç†å‘˜çŠ¶æ€åœ¨ Telegram ç¾¤ç»„è®¾ç½®ä¸­æ§åˆ¶ã€‚

    ç®¡ç†å‘˜æœºå™¨äººæ¥æ”¶æ‰€æœ‰ç¾¤ç»„æ¶ˆæ¯ï¼Œè¿™å¯¹äºå§‹ç»ˆåœ¨çº¿çš„ç¾¤ç»„è¡Œä¸ºå¾ˆæœ‰ç”¨ã€‚

  

:::


::: details å®ç”¨çš„ BotFather å¼€å…³

    - `/setjoingroups` å…è®¸/æ‹’ç»ç¾¤ç»„æ·»åŠ 
    - `/setprivacy` æ§åˆ¶ç¾¤ç»„å¯è§æ€§è¡Œä¸º

  

:::


## è®¿é—®æ§åˆ¶å’Œæ¿€æ´»


  **ç§ä¿¡ç­–ç•¥ï¼š**

    `channels.telegram.dmPolicy` æ§åˆ¶ç§ä¿¡è®¿é—®ï¼š

    - `pairing`ï¼ˆé»˜è®¤ï¼‰
    - `allowlist`
    - `open`ï¼ˆéœ€è¦ `allowFrom` åŒ…å« `"*"`ï¼‰
    - `disabled`

    `channels.telegram.allowFrom` æ¥å—æ•°å­— Telegram ç”¨æˆ· IDã€‚`telegram:` / `tg:` å‰ç¼€è¢«æ¥å—å¹¶æ ‡å‡†åŒ–ã€‚
    å¼•å¯¼å‘å¯¼æ¥å— `@username` è¾“å…¥å¹¶å°†å…¶è§£æä¸ºæ•°å­— IDã€‚
    å¦‚æœä½ å‡çº§åé…ç½®ä¸­åŒ…å« `@username` ç™½åå•æ¡ç›®ï¼Œè¿è¡Œ `openclaw doctor --fix` æ¥è§£æå®ƒä»¬ï¼ˆå°½åŠ›è€Œä¸ºï¼›éœ€è¦ Telegram æœºå™¨äºº Tokenï¼‰ã€‚

    ### æŸ¥æ‰¾ä½ çš„ Telegram ç”¨æˆ· ID

    æ›´å®‰å…¨çš„æ–¹å¼ï¼ˆæ— ç¬¬ä¸‰æ–¹æœºå™¨äººï¼‰ï¼š

    1. ç§ä¿¡ä½ çš„æœºå™¨äººã€‚
    2. è¿è¡Œ `openclaw logs --follow`ã€‚
    3. è¯»å– `from.id`ã€‚

    å®˜æ–¹ Bot API æ–¹æ³•ï¼š

```bash
curl "https://api.telegram.org/bot<bot_token>/getUpdates"
```

    ç¬¬ä¸‰æ–¹æ–¹æ³•ï¼ˆéšç§æ€§è¾ƒä½ï¼‰ï¼š`@userinfobot` æˆ– `@getidsbot`ã€‚


  **ç¾¤ç»„ç­–ç•¥å’Œç™½åå•ï¼š**

    æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„æ§åˆ¶ï¼š

    1. **å…è®¸å“ªäº›ç¾¤ç»„**ï¼ˆ`channels.telegram.groups`ï¼‰
       - æ—  `groups` é…ç½®ï¼šå…è®¸æ‰€æœ‰ç¾¤ç»„
       - å·²é…ç½® `groups`ï¼šä½œä¸ºç™½åå•ï¼ˆæ˜¾å¼ ID æˆ– `"*"`ï¼‰

    2. **å…è®¸ç¾¤ç»„ä¸­çš„å“ªäº›å‘é€è€…**ï¼ˆ`channels.telegram.groupPolicy`ï¼‰
       - `open`
       - `allowlist`ï¼ˆé»˜è®¤ï¼‰
       - `disabled`

    `groupAllowFrom` ç”¨äºç¾¤ç»„å‘é€è€…è¿‡æ»¤ã€‚å¦‚æœæœªè®¾ç½®ï¼ŒTelegram å›é€€åˆ° `allowFrom`ã€‚
    `groupAllowFrom` æ¡ç›®å¿…é¡»æ˜¯æ•°å­— Telegram ç”¨æˆ· IDã€‚

    ç¤ºä¾‹ï¼šå…è®¸ä¸€ä¸ªç‰¹å®šç¾¤ç»„ä¸­çš„ä»»ä½•æˆå‘˜ï¼š

```json5
{
  channels: {
    telegram: {
      groups: {
        "-1001234567890": {
          groupPolicy: "open",
          requireMention: false,
        },
      },
    },
  },
}
```


  **æåŠè¡Œä¸ºï¼š**

    ç¾¤ç»„å›å¤é»˜è®¤éœ€è¦æåŠã€‚

    æåŠå¯ä»¥æ¥è‡ªï¼š

    - åŸç”Ÿ `@botusername` æåŠï¼Œæˆ–
    - æåŠæ¨¡å¼ï¼š
      - `agents.list[].groupChat.mentionPatterns`
      - `messages.groupChat.mentionPatterns`

    ä¼šè¯çº§å‘½ä»¤å¼€å…³ï¼š

    - `/activation always`
    - `/activation mention`

    è¿™äº›ä»…æ›´æ–°ä¼šè¯çŠ¶æ€ã€‚ä½¿ç”¨é…ç½®è¿›è¡ŒæŒä¹…åŒ–ã€‚

    æŒä¹…åŒ–é…ç½®ç¤ºä¾‹ï¼š

```json5
{
  channels: {
    telegram: {
      groups: {
        "*": { requireMention: false },
      },
    },
  },
}
```

    è·å–ç¾¤ç»„èŠå¤© IDï¼š

    - è½¬å‘ç¾¤ç»„æ¶ˆæ¯åˆ° `@userinfobot` / `@getidsbot`
    - æˆ–ä» `openclaw logs --follow` ä¸­è¯»å– `chat.id`
    - æˆ–æ£€æŸ¥ Bot API `getUpdates`


## è¿è¡Œæ—¶è¡Œä¸º

- Telegram ç”±ç½‘å…³è¿›ç¨‹ç®¡ç†ã€‚
- è·¯ç”±æ˜¯ç¡®å®šæ€§çš„ï¼šTelegram å…¥ç«™æ¶ˆæ¯å›å¤åˆ° Telegramï¼ˆæ¨¡å‹ä¸é€‰æ‹©é€šé“ï¼‰ã€‚
- å…¥ç«™æ¶ˆæ¯è¢«æ ‡å‡†åŒ–ä¸ºå…±äº«çš„é€šé“ä¿¡å°ï¼ŒåŒ…å«å›å¤å…ƒæ•°æ®å’Œåª’ä½“å ä½ç¬¦ã€‚
- ç¾¤ç»„ä¼šè¯æŒ‰ç¾¤ç»„ ID éš”ç¦»ã€‚è®ºå›è¯é¢˜è¿½åŠ  `:topic:<threadId>` ä»¥ä¿æŒè¯é¢˜éš”ç¦»ã€‚
- ç§ä¿¡æ¶ˆæ¯å¯ä»¥æºå¸¦ `message_thread_id`ï¼›OpenClaw ä½¿ç”¨çº¿ç¨‹æ„ŸçŸ¥çš„ä¼šè¯é”®è·¯ç”±å®ƒä»¬ï¼Œå¹¶ä¿ç•™çº¿ç¨‹ ID ç”¨äºå›å¤ã€‚
- é•¿è½®è¯¢ä½¿ç”¨ grammY runnerï¼ŒæŒ‰èŠå¤©/çº¿ç¨‹æ’åºã€‚æ•´ä½“ runner sink å¹¶å‘ä½¿ç”¨ `agents.defaults.maxConcurrent`ã€‚
- Telegram Bot API ä¸æ”¯æŒå·²è¯»å›æ‰§ï¼ˆ`sendReadReceipts` ä¸é€‚ç”¨ï¼‰ã€‚

## åŠŸèƒ½å‚è€ƒ


::: details Telegram ç§ä¿¡ä¸­çš„è‰ç¨¿æµå¼ä¼ è¾“

    OpenClaw å¯ä»¥ä½¿ç”¨ Telegram è‰ç¨¿æ°”æ³¡ï¼ˆ`sendMessageDraft`ï¼‰æµå¼ä¼ è¾“éƒ¨åˆ†å›å¤ã€‚

    è¦æ±‚ï¼š

    - `channels.telegram.streamMode` ä¸æ˜¯ `"off"`ï¼ˆé»˜è®¤ï¼š`"partial"`ï¼‰
    - ç§èŠ
    - å…¥ç«™æ›´æ–°åŒ…å« `message_thread_id`
    - æœºå™¨äººè¯é¢˜å·²å¯ç”¨ï¼ˆ`getMe().has_topics_enabled`ï¼‰

    æ¨¡å¼ï¼š

    - `off`ï¼šä¸è¿›è¡Œè‰ç¨¿æµå¼ä¼ è¾“
    - `partial`ï¼šä»éƒ¨åˆ†æ–‡æœ¬é¢‘ç¹æ›´æ–°è‰ç¨¿
    - `block`ï¼šä½¿ç”¨ `channels.telegram.draftChunk` è¿›è¡Œåˆ†å—è‰ç¨¿æ›´æ–°

    `draftChunk` å—æ¨¡å¼çš„é»˜è®¤å€¼ï¼š

    - `minChars: 200`
    - `maxChars: 800`
    - `breakPreference: "paragraph"`

    `maxChars` å— `channels.telegram.textChunkLimit` é™åˆ¶ã€‚

    è‰ç¨¿æµå¼ä¼ è¾“ä»…é™ç§ä¿¡ï¼›ç¾¤ç»„/é¢‘é“ä¸ä½¿ç”¨è‰ç¨¿æ°”æ³¡ã€‚

    å¦‚æœä½ æƒ³è¦æ—©æœŸçš„çœŸå® Telegram æ¶ˆæ¯è€Œä¸æ˜¯è‰ç¨¿æ›´æ–°ï¼Œä½¿ç”¨å—æµå¼ä¼ è¾“ï¼ˆ`channels.telegram.blockStreaming: true`ï¼‰ã€‚

    Telegram ä¸“å±æ¨ç†æµï¼š

    - `/reasoning stream` åœ¨ç”Ÿæˆæ—¶å°†æ¨ç†å‘é€åˆ°è‰ç¨¿æ°”æ³¡
    - æœ€ç»ˆç­”æ¡ˆåœ¨ä¸åŒ…å«æ¨ç†æ–‡æœ¬çš„æƒ…å†µä¸‹å‘é€

  

:::


::: details æ ¼å¼åŒ–å’Œ HTML å›é€€

    å‡ºç«™æ–‡æœ¬ä½¿ç”¨ Telegram `parse_mode: "HTML"`ã€‚

    - ç±» Markdown æ–‡æœ¬è¢«æ¸²æŸ“ä¸º Telegram å®‰å…¨çš„ HTMLã€‚
    - åŸå§‹æ¨¡å‹ HTML è¢«è½¬ä¹‰ä»¥å‡å°‘ Telegram è§£æå¤±è´¥ã€‚
    - å¦‚æœ Telegram æ‹’ç»è§£æåçš„ HTMLï¼ŒOpenClaw ä»¥çº¯æ–‡æœ¬é‡è¯•ã€‚

    é“¾æ¥é¢„è§ˆé»˜è®¤å¯ç”¨ï¼Œå¯é€šè¿‡ `channels.telegram.linkPreview: false` ç¦ç”¨ã€‚

  

:::


::: details åŸç”Ÿå‘½ä»¤å’Œè‡ªå®šä¹‰å‘½ä»¤

    Telegram å‘½ä»¤èœå•åœ¨å¯åŠ¨æ—¶é€šè¿‡ `setMyCommands` æ³¨å†Œã€‚

    åŸç”Ÿå‘½ä»¤é»˜è®¤å€¼ï¼š

    - `commands.native: "auto"` ä¸º Telegram å¯ç”¨åŸç”Ÿå‘½ä»¤

    æ·»åŠ è‡ªå®šä¹‰å‘½ä»¤èœå•æ¡ç›®ï¼š

```json5
{
  channels: {
    telegram: {
      customCommands: [
        { command: "backup", description: "Git backup" },
        { command: "generate", description: "Create an image" },
      ],
    },
  },
}
```

    è§„åˆ™ï¼š

    - åç§°ä¼šè¢«æ ‡å‡†åŒ–ï¼ˆå»é™¤å‰å¯¼ `/`ï¼Œè½¬å°å†™ï¼‰
    - æœ‰æ•ˆæ¨¡å¼ï¼š`a-z`ã€`0-9`ã€`_`ï¼Œé•¿åº¦ `1..32`
    - è‡ªå®šä¹‰å‘½ä»¤ä¸èƒ½è¦†ç›–åŸç”Ÿå‘½ä»¤
    - å†²çª/é‡å¤ä¼šè¢«è·³è¿‡å¹¶è®°å½•æ—¥å¿—

    è¯´æ˜ï¼š

    - è‡ªå®šä¹‰å‘½ä»¤ä»…æ˜¯èœå•æ¡ç›®ï¼›ä¸ä¼šè‡ªåŠ¨å®ç°è¡Œä¸º
    - æ’ä»¶/æŠ€èƒ½å‘½ä»¤å³ä½¿ä¸åœ¨ Telegram èœå•ä¸­æ˜¾ç¤ºï¼Œè¾“å…¥æ—¶ä»å¯å·¥ä½œ

    å¦‚æœåŸç”Ÿå‘½ä»¤è¢«ç¦ç”¨ï¼Œå†…ç½®å‘½ä»¤ä¼šè¢«ç§»é™¤ã€‚è‡ªå®šä¹‰/æ’ä»¶å‘½ä»¤å¦‚æœå·²é…ç½®ä»å¯èƒ½æ³¨å†Œã€‚

    å¸¸è§è®¾ç½®å¤±è´¥ï¼š

    - `setMyCommands failed` é€šå¸¸æ„å‘³ç€åˆ° `api.telegram.org` çš„å‡ºç«™ DNS/HTTPS è¢«é˜»æ­¢ã€‚

    ### è®¾å¤‡é…å¯¹å‘½ä»¤ï¼ˆ`device-pair` æ’ä»¶ï¼‰

    å½“å®‰è£…äº† `device-pair` æ’ä»¶æ—¶ï¼š

    1. `/pair` ç”Ÿæˆè®¾ç½®ç 
    2. åœ¨ iOS åº”ç”¨ä¸­ç²˜è´´è¯¥ç 
    3. `/pair approve` æ‰¹å‡†æœ€æ–°çš„å¾…å¤„ç†è¯·æ±‚

    æ›´å¤šè¯¦æƒ…ï¼š[é…å¯¹](/channels/pairing#pair-via-telegram-recommended-for-ios)ã€‚

  

:::


::: details å†…è”æŒ‰é’®

    é…ç½®å†…è”é”®ç›˜èŒƒå›´ï¼š

```json5
{
  channels: {
    telegram: {
      capabilities: {
        inlineButtons: "allowlist",
      },
    },
  },
}
```

    æŒ‰è´¦æˆ·è¦†ç›–ï¼š

```json5
{
  channels: {
    telegram: {
      accounts: {
        main: {
          capabilities: {
            inlineButtons: "allowlist",
          },
        },
      },
    },
  },
}
```

    èŒƒå›´ï¼š

    - `off`
    - `dm`
    - `group`
    - `all`
    - `allowlist`ï¼ˆé»˜è®¤ï¼‰

    æ—§ç‰ˆ `capabilities: ["inlineButtons"]` æ˜ å°„ä¸º `inlineButtons: "all"`ã€‚

    æ¶ˆæ¯æ“ä½œç¤ºä¾‹ï¼š

```json5
{
  action: "send",
  channel: "telegram",
  to: "123456789",
  message: "Choose an option:",
  buttons: [
    [
      { text: "Yes", callback_data: "yes" },
      { text: "No", callback_data: "no" },
    ],
    [{ text: "Cancel", callback_data: "cancel" }],
  ],
}
```

    å›è°ƒç‚¹å‡»ä»¥æ–‡æœ¬å½¢å¼ä¼ é€’ç»™æ™ºèƒ½ä½“ï¼š
    `callback_data: <value>`

  

:::


::: details Telegram æ¶ˆæ¯æ“ä½œï¼ˆæ™ºèƒ½ä½“å’Œè‡ªåŠ¨åŒ–ï¼‰

    Telegram å·¥å…·æ“ä½œåŒ…æ‹¬ï¼š

    - `sendMessage`ï¼ˆ`to`ã€`content`ï¼Œå¯é€‰ `mediaUrl`ã€`replyToMessageId`ã€`messageThreadId`ï¼‰
    - `react`ï¼ˆ`chatId`ã€`messageId`ã€`emoji`ï¼‰
    - `deleteMessage`ï¼ˆ`chatId`ã€`messageId`ï¼‰
    - `editMessage`ï¼ˆ`chatId`ã€`messageId`ã€`content`ï¼‰

    é€šé“æ¶ˆæ¯æ“ä½œæä¾›äººæœºå·¥ç¨‹å­¦åˆ«åï¼ˆ`send`ã€`react`ã€`delete`ã€`edit`ã€`sticker`ã€`sticker-search`ï¼‰ã€‚

    é—¨æ§é…ç½®ï¼š

    - `channels.telegram.actions.sendMessage`
    - `channels.telegram.actions.editMessage`
    - `channels.telegram.actions.deleteMessage`
    - `channels.telegram.actions.reactions`
    - `channels.telegram.actions.sticker`ï¼ˆé»˜è®¤ï¼šç¦ç”¨ï¼‰

    è¡¨æƒ…å›åº”ç§»é™¤è¯­ä¹‰ï¼š[/tools/reactions](/tools/reactions)

  

:::


::: details å›å¤çº¿ç¨‹æ ‡ç­¾

    Telegram æ”¯æŒåœ¨ç”Ÿæˆè¾“å‡ºä¸­ä½¿ç”¨æ˜¾å¼å›å¤çº¿ç¨‹æ ‡ç­¾ï¼š

    - `[[reply_to_current]]` å›å¤è§¦å‘æ¶ˆæ¯
    - `[[reply_to:<id>]]` å›å¤ç‰¹å®š Telegram æ¶ˆæ¯ ID

    `channels.telegram.replyToMode` æ§åˆ¶å¤„ç†æ–¹å¼ï¼š

    - `off`ï¼ˆé»˜è®¤ï¼‰
    - `first`
    - `all`

    æ³¨æ„ï¼š`off` ç¦ç”¨éšå¼å›å¤çº¿ç¨‹ã€‚æ˜¾å¼ `[[reply_to_*]]` æ ‡ç­¾ä»ç„¶æœ‰æ•ˆã€‚

  

:::


::: details è®ºå›è¯é¢˜å’Œçº¿ç¨‹è¡Œä¸º

    è®ºå›è¶…çº§ç¾¤ç»„ï¼š

    - è¯é¢˜ä¼šè¯é”®è¿½åŠ  `:topic:<threadId>`
    - å›å¤å’Œè¾“å…¥çŠ¶æ€æŒ‡å‘è¯é¢˜çº¿ç¨‹
    - è¯é¢˜é…ç½®è·¯å¾„ï¼š
      `channels.telegram.groups.<chatId>.topics.<threadId>`

    é€šç”¨è¯é¢˜ï¼ˆ`threadId=1`ï¼‰ç‰¹æ®Šæƒ…å†µï¼š

    - æ¶ˆæ¯å‘é€çœç•¥ `message_thread_id`ï¼ˆTelegram æ‹’ç» `sendMessage(...thread_id=1)`ï¼‰
    - è¾“å…¥çŠ¶æ€æ“ä½œä»åŒ…å« `message_thread_id`

    è¯é¢˜ç»§æ‰¿ï¼šè¯é¢˜æ¡ç›®ç»§æ‰¿ç¾¤ç»„è®¾ç½®ï¼Œé™¤éè¢«è¦†ç›–ï¼ˆ`requireMention`ã€`allowFrom`ã€`skills`ã€`systemPrompt`ã€`enabled`ã€`groupPolicy`ï¼‰ã€‚

    æ¨¡æ¿ä¸Šä¸‹æ–‡åŒ…å«ï¼š

    - `MessageThreadId`
    - `IsForum`

    ç§ä¿¡çº¿ç¨‹è¡Œä¸ºï¼š

    - å¸¦æœ‰ `message_thread_id` çš„ç§èŠä¿æŒç§ä¿¡è·¯ç”±ï¼Œä½†ä½¿ç”¨çº¿ç¨‹æ„ŸçŸ¥çš„ä¼šè¯é”®/å›å¤ç›®æ ‡ã€‚

  

:::


::: details éŸ³é¢‘ã€è§†é¢‘å’Œè´´çº¸

    ### éŸ³é¢‘æ¶ˆæ¯

    Telegram åŒºåˆ†è¯­éŸ³ç¬”è®°å’ŒéŸ³é¢‘æ–‡ä»¶ã€‚

    - é»˜è®¤ï¼šéŸ³é¢‘æ–‡ä»¶è¡Œä¸º
    - åœ¨æ™ºèƒ½ä½“å›å¤ä¸­ä½¿ç”¨ `[[audio_as_voice]]` æ ‡ç­¾å¼ºåˆ¶ä»¥è¯­éŸ³ç¬”è®°å‘é€

    æ¶ˆæ¯æ“ä½œç¤ºä¾‹ï¼š

```json5
{
  action: "send",
  channel: "telegram",
  to: "123456789",
  media: "https://example.com/voice.ogg",
  asVoice: true,
}
```

    ### è§†é¢‘æ¶ˆæ¯

    Telegram åŒºåˆ†è§†é¢‘æ–‡ä»¶å’Œè§†é¢‘ç¬”è®°ã€‚

    æ¶ˆæ¯æ“ä½œç¤ºä¾‹ï¼š

```json5
{
  action: "send",
  channel: "telegram",
  to: "123456789",
  media: "https://example.com/video.mp4",
  asVideoNote: true,
}
```

    è§†é¢‘ç¬”è®°ä¸æ”¯æŒæ ‡é¢˜ï¼›æä¾›çš„æ¶ˆæ¯æ–‡æœ¬ä¼šå•ç‹¬å‘é€ã€‚

    ### è´´çº¸

    å…¥ç«™è´´çº¸å¤„ç†ï¼š

    - é™æ€ WEBPï¼šä¸‹è½½å¹¶å¤„ç†ï¼ˆå ä½ç¬¦ `<media:sticker>`ï¼‰
    - åŠ¨ç”» TGSï¼šè·³è¿‡
    - è§†é¢‘ WEBMï¼šè·³è¿‡

    è´´çº¸ä¸Šä¸‹æ–‡å­—æ®µï¼š

    - `Sticker.emoji`
    - `Sticker.setName`
    - `Sticker.fileId`
    - `Sticker.fileUniqueId`
    - `Sticker.cachedDescription`

    è´´çº¸ç¼“å­˜æ–‡ä»¶ï¼š

    - `~/.openclaw/telegram/sticker-cache.json`

    è´´çº¸ä¼šè¢«æè¿°ä¸€æ¬¡ï¼ˆå¦‚å¯èƒ½ï¼‰å¹¶ç¼“å­˜ï¼Œä»¥å‡å°‘é‡å¤çš„è§†è§‰è°ƒç”¨ã€‚

    å¯ç”¨è´´çº¸æ“ä½œï¼š

```json5
{
  channels: {
    telegram: {
      actions: {
        sticker: true,
      },
    },
  },
}
```

    å‘é€è´´çº¸æ“ä½œï¼š

```json5
{
  action: "sticker",
  channel: "telegram",
  to: "123456789",
  fileId: "CAACAgIAAxkBAAI...",
}
```

    æœç´¢ç¼“å­˜è´´çº¸ï¼š

```json5
{
  action: "sticker-search",
  channel: "telegram",
  query: "cat waving",
  limit: 5,
}
```

  

:::


::: details è¡¨æƒ…å›åº”é€šçŸ¥

    Telegram è¡¨æƒ…å›åº”ä½œä¸º `message_reaction` æ›´æ–°åˆ°è¾¾ï¼ˆä¸æ¶ˆæ¯è½½è·åˆ†å¼€ï¼‰ã€‚

    å¯ç”¨åï¼ŒOpenClaw å…¥é˜Ÿç³»ç»Ÿäº‹ä»¶å¦‚ï¼š

    - `Telegram reaction added: ğŸ‘ by Alice (@alice) on msg 42`

    é…ç½®ï¼š

    - `channels.telegram.reactionNotifications`ï¼š`off | own | all`ï¼ˆé»˜è®¤ï¼š`own`ï¼‰
    - `channels.telegram.reactionLevel`ï¼š`off | ack | minimal | extensive`ï¼ˆé»˜è®¤ï¼š`minimal`ï¼‰

    è¯´æ˜ï¼š

    - `own` è¡¨ç¤ºä»…ç”¨æˆ·å¯¹æœºå™¨äººå‘é€çš„æ¶ˆæ¯çš„å›åº”ï¼ˆé€šè¿‡å‘é€æ¶ˆæ¯ç¼“å­˜å°½åŠ›åŒ¹é…ï¼‰ã€‚
    - Telegram åœ¨å›åº”æ›´æ–°ä¸­ä¸æä¾›çº¿ç¨‹ IDã€‚
      - éè®ºå›ç¾¤ç»„è·¯ç”±åˆ°ç¾¤ç»„èŠå¤©ä¼šè¯
      - è®ºå›ç¾¤ç»„è·¯ç”±åˆ°ç¾¤ç»„é€šç”¨è¯é¢˜ä¼šè¯ï¼ˆ`:topic:1`ï¼‰ï¼Œè€Œéç²¾ç¡®çš„åŸå§‹è¯é¢˜

    è½®è¯¢/Webhook çš„ `allowed_updates` è‡ªåŠ¨åŒ…å« `message_reaction`ã€‚

  

:::


::: details ä» Telegram äº‹ä»¶å’Œå‘½ä»¤å†™å…¥é…ç½®

    é€šé“é…ç½®å†™å…¥é»˜è®¤å¯ç”¨ï¼ˆ`configWrites !== false`ï¼‰ã€‚

    Telegram è§¦å‘çš„å†™å…¥åŒ…æ‹¬ï¼š

    - ç¾¤ç»„è¿ç§»äº‹ä»¶ï¼ˆ`migrate_to_chat_id`ï¼‰æ›´æ–° `channels.telegram.groups`
    - `/config set` å’Œ `/config unset`ï¼ˆéœ€è¦å¯ç”¨å‘½ä»¤ï¼‰

    ç¦ç”¨ï¼š

```json5
{
  channels: {
    telegram: {
      configWrites: false,
    },
  },
}
```

  

:::


::: details é•¿è½®è¯¢ vs Webhook

    é»˜è®¤ï¼šé•¿è½®è¯¢ã€‚

    Webhook æ¨¡å¼ï¼š

    - è®¾ç½® `channels.telegram.webhookUrl`
    - è®¾ç½® `channels.telegram.webhookSecret`ï¼ˆè®¾ç½® Webhook URL æ—¶å¿…éœ€ï¼‰
    - å¯é€‰ `channels.telegram.webhookPath`ï¼ˆé»˜è®¤ `/telegram-webhook`ï¼‰
    - å¯é€‰ `channels.telegram.webhookHost`ï¼ˆé»˜è®¤ `127.0.0.1`ï¼‰

    Webhook æ¨¡å¼çš„é»˜è®¤æœ¬åœ°ç›‘å¬å™¨ç»‘å®šåˆ° `127.0.0.1:8787`ã€‚

    å¦‚æœä½ çš„å…¬å…±ç«¯ç‚¹ä¸åŒï¼Œåœ¨å‰é¢æ”¾ç½®åå‘ä»£ç†ï¼Œå°† `webhookUrl` æŒ‡å‘å…¬å…± URLã€‚
    å½“ä½ éœ€è¦å¤–éƒ¨å…¥ç«™æ—¶ï¼Œè®¾ç½® `webhookHost`ï¼ˆä¾‹å¦‚ `0.0.0.0`ï¼‰ã€‚

  

:::


::: details é™åˆ¶ã€é‡è¯•å’Œ CLI ç›®æ ‡

    - `channels.telegram.textChunkLimit` é»˜è®¤ä¸º 4000ã€‚
    - `channels.telegram.chunkMode="newline"` åœ¨æŒ‰é•¿åº¦åˆ†å‰²å‰ä¼˜å…ˆä½¿ç”¨æ®µè½è¾¹ç•Œï¼ˆç©ºè¡Œï¼‰ã€‚
    - `channels.telegram.mediaMaxMb`ï¼ˆé»˜è®¤ 5ï¼‰é™åˆ¶å…¥ç«™ Telegram åª’ä½“ä¸‹è½½/å¤„ç†å¤§å°ã€‚
    - `channels.telegram.timeoutSeconds` è¦†ç›– Telegram API å®¢æˆ·ç«¯è¶…æ—¶ï¼ˆå¦‚æœªè®¾ç½®ï¼Œåº”ç”¨ grammY é»˜è®¤å€¼ï¼‰ã€‚
    - ç¾¤ç»„ä¸Šä¸‹æ–‡å†å²ä½¿ç”¨ `channels.telegram.historyLimit` æˆ– `messages.groupChat.historyLimit`ï¼ˆé»˜è®¤ 50ï¼‰ï¼›`0` ç¦ç”¨ã€‚
    - ç§ä¿¡å†å²æ§åˆ¶ï¼š
      - `channels.telegram.dmHistoryLimit`
      - `channels.telegram.dms["<user_id>"].historyLimit`
    - å‡ºç«™ Telegram API é‡è¯•å¯é€šè¿‡ `channels.telegram.retry` é…ç½®ã€‚

    CLI å‘é€ç›®æ ‡å¯ä»¥æ˜¯æ•°å­—èŠå¤© ID æˆ–ç”¨æˆ·åï¼š

```bash
openclaw message send --channel telegram --target 123456789 --message "hi"
openclaw message send --channel telegram --target @name --message "hi"
```

  

:::


## æ•…éšœæ’æŸ¥


::: details æœºå™¨äººä¸å“åº”éæåŠçš„ç¾¤ç»„æ¶ˆæ¯

    - å¦‚æœ `requireMention=false`ï¼ŒTelegram éšç§æ¨¡å¼å¿…é¡»å…è®¸å®Œå…¨å¯è§æ€§ã€‚
      - BotFatherï¼š`/setprivacy` -> ç¦ç”¨
      - ç„¶ååœ¨ç¾¤ç»„ä¸­ç§»é™¤å¹¶é‡æ–°æ·»åŠ æœºå™¨äºº
    - `openclaw channels status` ä¼šåœ¨é…ç½®æœŸæœ›æœªæåŠçš„ç¾¤ç»„æ¶ˆæ¯æ—¶å‘å‡ºè­¦å‘Šã€‚
    - `openclaw channels status --probe` å¯ä»¥æ£€æŸ¥æ˜¾å¼æ•°å­—ç¾¤ç»„ IDï¼›é€šé…ç¬¦ `"*"` æ— æ³•è¿›è¡Œæˆå‘˜èµ„æ ¼æ¢æµ‹ã€‚
    - å¿«é€Ÿä¼šè¯æµ‹è¯•ï¼š`/activation always`ã€‚

  

:::


::: details æœºå™¨äººå®Œå…¨çœ‹ä¸åˆ°ç¾¤ç»„æ¶ˆæ¯

    - å½“ `channels.telegram.groups` å­˜åœ¨æ—¶ï¼Œç¾¤ç»„å¿…é¡»è¢«åˆ—å‡ºï¼ˆæˆ–åŒ…å« `"*"`ï¼‰
    - éªŒè¯æœºå™¨äººåœ¨ç¾¤ç»„ä¸­çš„æˆå‘˜èµ„æ ¼
    - æŸ¥çœ‹æ—¥å¿—ï¼š`openclaw logs --follow` äº†è§£è·³è¿‡åŸå› 

  

:::


::: details å‘½ä»¤éƒ¨åˆ†å·¥ä½œæˆ–å®Œå…¨ä¸å·¥ä½œ

    - æˆæƒä½ çš„å‘é€è€…èº«ä»½ï¼ˆé…å¯¹å’Œ/æˆ–æ•°å­— `allowFrom`ï¼‰
    - å³ä½¿ç¾¤ç»„ç­–ç•¥ä¸º `open`ï¼Œå‘½ä»¤æˆæƒä»ç„¶é€‚ç”¨
    - `setMyCommands failed` é€šå¸¸è¡¨ç¤ºåˆ° `api.telegram.org` çš„ DNS/HTTPS å¯è¾¾æ€§é—®é¢˜

  

:::


::: details è½®è¯¢æˆ–ç½‘ç»œä¸ç¨³å®š

    - Node 22+ å’Œè‡ªå®šä¹‰ fetch/ä»£ç†å¯èƒ½å›  AbortSignal ç±»å‹ä¸åŒ¹é…è€Œè§¦å‘ç«‹å³ä¸­æ­¢è¡Œä¸ºã€‚
    - æŸäº›ä¸»æœºå…ˆå°† `api.telegram.org` è§£æä¸º IPv6ï¼›æŸåçš„ IPv6 å‡ºç«™å¯èƒ½å¯¼è‡´é—´æ­‡æ€§ Telegram API æ•…éšœã€‚
    - éªŒè¯ DNS åº”ç­”ï¼š

```bash
dig +short api.telegram.org A
dig +short api.telegram.org AAAA
```

  

:::


æ›´å¤šå¸®åŠ©ï¼š[é€šé“æ•…éšœæ’æŸ¥](/channels/troubleshooting)ã€‚

## Telegram é…ç½®å‚è€ƒæŒ‡å¼•

ä¸»è¦å‚è€ƒï¼š

- `channels.telegram.enabled`ï¼šå¯ç”¨/ç¦ç”¨é€šé“å¯åŠ¨ã€‚
- `channels.telegram.botToken`ï¼šæœºå™¨äºº Tokenï¼ˆBotFatherï¼‰ã€‚
- `channels.telegram.tokenFile`ï¼šä»æ–‡ä»¶è·¯å¾„è¯»å– Tokenã€‚
- `channels.telegram.dmPolicy`ï¼š`pairing | allowlist | open | disabled`ï¼ˆé»˜è®¤ï¼špairingï¼‰ã€‚
- `channels.telegram.allowFrom`ï¼šç§ä¿¡ç™½åå•ï¼ˆæ•°å­— Telegram ç”¨æˆ· IDï¼‰ã€‚`open` éœ€è¦ `"*"`ã€‚`openclaw doctor --fix` å¯ä»¥å°†æ—§ç‰ˆ `@username` æ¡ç›®è§£æä¸º IDã€‚
- `channels.telegram.groupPolicy`ï¼š`open | allowlist | disabled`ï¼ˆé»˜è®¤ï¼šallowlistï¼‰ã€‚
- `channels.telegram.groupAllowFrom`ï¼šç¾¤ç»„å‘é€è€…ç™½åå•ï¼ˆæ•°å­— Telegram ç”¨æˆ· IDï¼‰ã€‚`openclaw doctor --fix` å¯ä»¥å°†æ—§ç‰ˆ `@username` æ¡ç›®è§£æä¸º IDã€‚
- `channels.telegram.groups`ï¼šæŒ‰ç¾¤ç»„é»˜è®¤å€¼ + ç™½åå•ï¼ˆä½¿ç”¨ `"*"` è®¾ç½®å…¨å±€é»˜è®¤å€¼ï¼‰ã€‚
  - `channels.telegram.groups.<id>.groupPolicy`ï¼šæŒ‰ç¾¤ç»„è¦†ç›– groupPolicyï¼ˆ`open | allowlist | disabled`ï¼‰ã€‚
  - `channels.telegram.groups.<id>.requireMention`ï¼šæåŠé—¨æ§é»˜è®¤å€¼ã€‚
  - `channels.telegram.groups.<id>.skills`ï¼šæŠ€èƒ½è¿‡æ»¤å™¨ï¼ˆçœç•¥ = æ‰€æœ‰æŠ€èƒ½ï¼Œç©º = æ— ï¼‰ã€‚
  - `channels.telegram.groups.<id>.allowFrom`ï¼šæŒ‰ç¾¤ç»„å‘é€è€…ç™½åå•è¦†ç›–ã€‚
  - `channels.telegram.groups.<id>.systemPrompt`ï¼šç¾¤ç»„çš„é¢å¤–ç³»ç»Ÿæç¤ºã€‚
  - `channels.telegram.groups.<id>.enabled`ï¼š`false` æ—¶ç¦ç”¨è¯¥ç¾¤ç»„ã€‚
  - `channels.telegram.groups.<id>.topics.<threadId>.*`ï¼šæŒ‰è¯é¢˜è¦†ç›–ï¼ˆä¸ç¾¤ç»„ç›¸åŒçš„å­—æ®µï¼‰ã€‚
  - `channels.telegram.groups.<id>.topics.<threadId>.groupPolicy`ï¼šæŒ‰è¯é¢˜è¦†ç›– groupPolicyï¼ˆ`open | allowlist | disabled`ï¼‰ã€‚
  - `channels.telegram.groups.<id>.topics.<threadId>.requireMention`ï¼šæŒ‰è¯é¢˜æåŠé—¨æ§è¦†ç›–ã€‚
- `channels.telegram.capabilities.inlineButtons`ï¼š`off | dm | group | all | allowlist`ï¼ˆé»˜è®¤ï¼šallowlistï¼‰ã€‚
- `channels.telegram.accounts.<account>.capabilities.inlineButtons`ï¼šæŒ‰è´¦æˆ·è¦†ç›–ã€‚
- `channels.telegram.replyToMode`ï¼š`off | first | all`ï¼ˆé»˜è®¤ï¼š`off`ï¼‰ã€‚
- `channels.telegram.textChunkLimit`ï¼šå‡ºç«™åˆ†å—å¤§å°ï¼ˆå­—ç¬¦ï¼‰ã€‚
- `channels.telegram.chunkMode`ï¼š`length`ï¼ˆé»˜è®¤ï¼‰æˆ– `newline`ï¼Œåœ¨æŒ‰é•¿åº¦åˆ†å—å‰å…ˆåœ¨ç©ºè¡Œå¤„ï¼ˆæ®µè½è¾¹ç•Œï¼‰åˆ†å‰²ã€‚
- `channels.telegram.linkPreview`ï¼šåˆ‡æ¢å‡ºç«™æ¶ˆæ¯çš„é“¾æ¥é¢„è§ˆï¼ˆé»˜è®¤ï¼štrueï¼‰ã€‚
- `channels.telegram.streamMode`ï¼š`off | partial | block`ï¼ˆè‰ç¨¿æµå¼ä¼ è¾“ï¼‰ã€‚
- `channels.telegram.mediaMaxMb`ï¼šå…¥ç«™/å‡ºç«™åª’ä½“ä¸Šé™ï¼ˆMBï¼‰ã€‚
- `channels.telegram.retry`ï¼šå‡ºç«™ Telegram API è°ƒç”¨çš„é‡è¯•ç­–ç•¥ï¼ˆattemptsã€minDelayMsã€maxDelayMsã€jitterï¼‰ã€‚
- `channels.telegram.network.autoSelectFamily`ï¼šè¦†ç›– Node autoSelectFamilyï¼ˆtrue=å¯ç”¨ï¼Œfalse=ç¦ç”¨ï¼‰ã€‚åœ¨ Node 22 ä¸Šé»˜è®¤ç¦ç”¨ä»¥é¿å… Happy Eyeballs è¶…æ—¶ã€‚
- `channels.telegram.proxy`ï¼šBot API è°ƒç”¨çš„ä»£ç† URLï¼ˆSOCKS/HTTPï¼‰ã€‚
- `channels.telegram.webhookUrl`ï¼šå¯ç”¨ Webhook æ¨¡å¼ï¼ˆéœ€è¦ `channels.telegram.webhookSecret`ï¼‰ã€‚
- `channels.telegram.webhookSecret`ï¼šWebhook å¯†é’¥ï¼ˆè®¾ç½® webhookUrl æ—¶å¿…éœ€ï¼‰ã€‚
- `channels.telegram.webhookPath`ï¼šæœ¬åœ° Webhook è·¯å¾„ï¼ˆé»˜è®¤ `/telegram-webhook`ï¼‰ã€‚
- `channels.telegram.webhookHost`ï¼šæœ¬åœ° Webhook ç»‘å®šä¸»æœºï¼ˆé»˜è®¤ `127.0.0.1`ï¼‰ã€‚
- `channels.telegram.actions.reactions`ï¼šTelegram å·¥å…·å›åº”çš„é—¨æ§ã€‚
- `channels.telegram.actions.sendMessage`ï¼šTelegram å·¥å…·æ¶ˆæ¯å‘é€çš„é—¨æ§ã€‚
- `channels.telegram.actions.deleteMessage`ï¼šTelegram å·¥å…·æ¶ˆæ¯åˆ é™¤çš„é—¨æ§ã€‚
- `channels.telegram.actions.sticker`ï¼šTelegram è´´çº¸æ“ä½œçš„é—¨æ§ â€” å‘é€å’Œæœç´¢ï¼ˆé»˜è®¤ï¼šfalseï¼‰ã€‚
- `channels.telegram.reactionNotifications`ï¼š`off | own | all` â€” æ§åˆ¶å“ªäº›å›åº”è§¦å‘ç³»ç»Ÿäº‹ä»¶ï¼ˆæœªè®¾ç½®æ—¶é»˜è®¤ï¼š`own`ï¼‰ã€‚
- `channels.telegram.reactionLevel`ï¼š`off | ack | minimal | extensive` â€” æ§åˆ¶æ™ºèƒ½ä½“çš„å›åº”èƒ½åŠ›ï¼ˆæœªè®¾ç½®æ—¶é»˜è®¤ï¼š`minimal`ï¼‰ã€‚

- [é…ç½®å‚è€ƒ - Telegram](/gateway/configuration-reference#telegram)

Telegram ç‰¹æœ‰çš„é«˜ä¿¡å·å­—æ®µï¼š

- å¯åŠ¨/è®¤è¯ï¼š`enabled`ã€`botToken`ã€`tokenFile`ã€`accounts.*`
- è®¿é—®æ§åˆ¶ï¼š`dmPolicy`ã€`allowFrom`ã€`groupPolicy`ã€`groupAllowFrom`ã€`groups`ã€`groups.*.topics.*`
- å‘½ä»¤/èœå•ï¼š`commands.native`ã€`customCommands`
- çº¿ç¨‹/å›å¤ï¼š`replyToMode`
- æµå¼ä¼ è¾“ï¼š`streamMode`ã€`draftChunk`ã€`blockStreaming`
- æ ¼å¼åŒ–/æŠ•é€’ï¼š`textChunkLimit`ã€`chunkMode`ã€`linkPreview`ã€`responsePrefix`
- åª’ä½“/ç½‘ç»œï¼š`mediaMaxMb`ã€`timeoutSeconds`ã€`retry`ã€`network.autoSelectFamily`ã€`proxy`
- Webhookï¼š`webhookUrl`ã€`webhookSecret`ã€`webhookPath`ã€`webhookHost`
- æ“ä½œ/åŠŸèƒ½ï¼š`capabilities.inlineButtons`ã€`actions.sendMessage|editMessage|deleteMessage|reactions|sticker`
- å›åº”ï¼š`reactionNotifications`ã€`reactionLevel`
- å†™å…¥/å†å²ï¼š`configWrites`ã€`historyLimit`ã€`dmHistoryLimit`ã€`dms.*.historyLimit`

## ç›¸å…³

- [é…å¯¹](/channels/pairing)
- [é€šé“è·¯ç”±](/channels/channel-routing)
- [æ•…éšœæ’æŸ¥](/channels/troubleshooting)
